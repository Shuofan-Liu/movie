<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Movie!</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Lato:wght@300;400&display=swap" rel="stylesheet">

  <!-- Styles -->
  <link rel="stylesheet" href="./css/styles.css" />

  <!-- Firebase SDK (Compat) placed before app scripts) -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-functions-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>
</head>
<body>
  <!-- å·¦ä¸Šè§’ç”¨æˆ·å…¥å£ -->
  <div class="user-corner" id="userCorner">
    <!-- æœªç™»å½•æ—¶æ˜¾ç¤ºç«ç„° -->
    <div class="corner-flame" id="cornerFlame" onclick="showLoginModal()">
      <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
        <path d="M13.5.67s.74 2.65.74 4.8c0 2.06-1.35 3.73-3.41 3.73-2.07 0-3.63-1.67-3.63-3.73l.03-.36C5.21 7.51 4 10.62 4 14c0 4.42 3.58 8 8 8s8-3.58 8-8C20 8.61 17.41 3.8 13.5.67zM11.71 19c-1.78 0-3.22-1.4-3.22-3.14 0-1.62 1.05-2.76 2.81-3.12 1.77-.36 3.6-1.21 4.62-2.58.39 1.29.59 2.65.59 4.04 0 2.65-2.15 4.8-4.8 4.8z"/>
      </svg>
    </div>
    
    <!-- ç™»å½•åæ˜¾ç¤ºç”¨æˆ·å¤´åƒ -->
    <div class="corner-avatar" id="cornerAvatar" onclick="toggleUserMenu()" style="display:none;">
      <div class="corner-avatar-img" id="cornerAvatarImg"></div>
      <div class="corner-badge" id="cornerBadge" style="display:none;">0</div>
    </div>
  </div>

  <!-- ç”¨æˆ·ä¸‹æ‹‰èœå• -->
  <div class="user-dropdown" id="userDropdown">
    <div class="user-dropdown-header">
        <div class="dropdown-avatar" id="dropdownAvatar"></div>
        <div class="dropdown-info" style="display:flex; align-items:center; gap:8px; justify-content:space-between; width:100%;">
          <div class="dropdown-nickname" id="dropdownNickname"></div>
          <!-- åå­—å³ä¾§å±•ç¤ºå…³ç³»å¾½æ ‡ï¼ˆ>2 æŠ˜å ä¸º Xä¸ªå…³ç³»ï¼‰ -->
          <div class="dropdown-relations" id="dropdownRelations"></div>
        </div>
    </div>
    <div class="user-dropdown-body">
      <div class="dropdown-info-item">
        <strong>æœ€å–œæ¬¢çš„å¯¼æ¼”ï¼š</strong><span id="dropdownDirector"></span>
      </div>
      <div class="dropdown-info-item">
        <strong>æœ€å–œæ¬¢çš„ç”µå½±ï¼š</strong><span id="dropdownFilm"></span>
      </div>
      <div class="dropdown-badges" id="dropdownBadges"></div>
        <!-- ç”µå½±é£æ ¼ç§»åŠ¨åˆ°å¾½ç« ä¸‹æ–¹ä¸€è¡Œå±•ç¤º -->
        <div class="dropdown-style-below" id="dropdownStyleBelow" style="margin-top:6px; color:#bbb; font-size:13px;"></div>
    </div>
    <div class="user-dropdown-actions">
        <button class="dropdown-btn" onclick="showUserPage(window.currentUser.id)">ğŸ‘¤ æŸ¥çœ‹æˆ‘çš„ä¸»é¡µ</button>
        <button class="dropdown-btn" onclick="editOwnProfile()">âœï¸ ç¼–è¾‘èµ„æ–™</button>
        <button class="dropdown-btn" onclick="showMyMessages()">ğŸ“¬ æŸ¥çœ‹æˆ‘çš„ç•™è¨€ <span id="dropdownMsgPill" style="display:none; margin-left:6px; padding:2px 6px; background:rgba(212,175,55,0.2); border:1px solid rgba(212,175,55,0.4); color:#d4af37; border-radius:10px; font-size:12px;"></span></button>
        <button class="dropdown-btn" onclick="showRelationshipCenter()">ğŸ¤ å…³ç³»å¤„ç† <span id="dropdownRelPill" style="display:none; margin-left:6px; padding:2px 6px; background:rgba(212,175,55,0.2); border:1px solid rgba(212,175,55,0.4); color:#d4af37; border-radius:10px; font-size:12px;"></span></button>
      <button class="dropdown-btn" onclick="showAdminPrompt()">ğŸ‘‘ ç®¡ç†å‘˜æ¨¡å¼</button>
      <button class="dropdown-btn" onclick="logoutUser()">ğŸšª é€€å‡ºç™»å½•</button>
      <button class="dropdown-btn danger" onclick="deleteOwnAccount()">âš ï¸ æ³¨é”€è´¦æˆ·</button>
    </div>
  </div>

  <!-- ç”µå½±èƒ¶ç‰‡èƒŒæ™¯ -->
  <div class="film-strip-background" id="filmBackground"></div>

  <!-- æµåŠ¨è¯—æ„æ’ç‰ˆçš„å¯¼æ¼”åå­— -->
  <div class="directors-layer" id="directorsLayer"></div>

  <!-- å³ä¸‹è§’æµ‹éªŒæŒ‰é’®ï¼ˆä»…ç™»å½•åæ˜¾ç¤ºï¼‰ -->
  <div class="quiz-icon-button" id="quizIconButton" onclick="startQuiz()" title="å¼€å§‹æµ‹éªŒ" style="display:none;">
    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
      <path d="M18 3v2h-2V3H8v2H6V3H4v18h2v-2h2v2h8v-2h2v2h2V3h-2zM8 17H6v-2h2v2zm0-4H6v-2h2v2zm0-4H6V7h2v2zm10 8h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2V7h2v2z"/>
    </svg>
  </div>

  <!-- å¯¼æ¼”å¼¹çª— -->
  <div class="modal" id="directorModal">
    <div class="modal-content">
      <span class="modal-close" onclick="closeModal()">&times;</span>
      <div id="modalBody"></div>
    </div>
  </div>

  <!-- æµ‹éªŒè¦†ç›–å±‚ -->
  <div class="quiz-overlay" id="quizOverlay">
    <!-- æµ‹éªŒé¡µé¢ -->
    <div id="quizPage" class="quiz-container">
      <div class="progress-bar"><div class="progress-fill" id="progressFill" style="width:0%"></div></div>
      <div class="question-number" id="questionNumber">é—®é¢˜ 1 / 5</div>
      <div class="question-text" id="questionText"></div>
      <div class="question-image hidden" id="questionImage"><img id="questionImg" alt="question" /></div>
      <div id="answerContainer">
        <input id="answerInput" class="answer-input" placeholder="è¯·è¾“å…¥ç­”æ¡ˆ" />
        <div id="optionsContainer" class="options-container hidden"></div>
      </div>
      <button class="quiz-button" onclick="handleNext()">ä¸‹ä¸€é¢˜</button>
      <button class="quiz-button" onclick="closeQuiz()">å…³é—­</button>
    </div>
  </div>

  <!-- ç™»å½•/æ³¨å†Œæ¨¡æ€æ¡† -->
  <div class="login-modal-overlay" id="loginModalOverlay" onclick="closeLoginModal()"></div>
  <div class="login-modal" id="loginModal">
    <span class="modal-close" onclick="closeLoginModal()">&times;</span>
    
    <!-- ç™»å½•/æ³¨å†Œé€‰æ‹© -->
    <div id="loginChoice" class="login-choice">
      <h2>Welcome!</h2>
      <button class="choice-button" onclick="showRegisterForm()">ğŸ”¥ ç¬¬ä¸€æ¬¡æ¥ï¼Ÿ</button>
      <button class="choice-button" onclick="showLoginForm()">âœ¨ å·²ç»æ¥è¿‡ï¼Ÿ</button>
    </div>

    <!-- ç™»å½•è¡¨å• -->
    <div id="loginForm" class="auth-form hidden">
      <h2>ç™»å½•</h2>
      <form onsubmit="handleLogin(event)">
        <div class="form-group">
          <label for="loginNickname">æ˜µç§°</label>
          <input id="loginNickname" type="text" required placeholder="è¾“å…¥ä½ çš„æ˜µç§°" />
        </div>
        <div class="form-group">
          <label for="loginPassword">å¯†ç </label>
          <input id="loginPassword" type="password" required placeholder="è¾“å…¥ä½ çš„å¯†ç " />
        </div>
        <button type="submit" class="submit-button">ç™»å½•</button>
        <button type="button" class="back-button" onclick="showLoginChoice()">è¿”å›</button>
      </form>
    </div>

    <!-- æ³¨å†Œè¡¨å• -->
    <div id="registerForm" class="auth-form hidden">
      <h2>æ³¨å†Œ</h2>
      <form onsubmit="handleRegister(event)" id="regForm">
        <!-- å¤´åƒé€‰æ‹©å™¨ -->
        <div class="form-group">
          <label>é€‰æ‹©å¤´åƒ *</label>
          <small>ç‚¹å‡»é€‰æ‹©ï¼Œæœªé€‰æ‹©å°†è‡ªåŠ¨ç”Ÿæˆé¦–å­—æ¯å¤´åƒ</small>
          <div class="avatar-selector" id="avatarSelector"></div>
          <input type="hidden" id="selectedAvatar" value="" />
        </div>

        <!-- æ˜µç§° -->
        <div class="form-group">
          <label for="regNickname">æ˜µç§° *</label>
          <input id="regNickname" type="text" required placeholder="è¾“å…¥ä½ çš„æ˜µç§°" />
        </div>

        <!-- å¯†ç  -->
        <div class="form-group">
          <label for="regPassword">å¯†ç  *</label>
          <input id="regPassword" type="password" required placeholder="è‡³å°‘4ä¸ªå­—ç¬¦" />
        </div>
        <div class="form-group">
          <label for="regPasswordConfirm">ç¡®è®¤å¯†ç  *</label>
          <input id="regPasswordConfirm" type="password" required placeholder="å†æ¬¡è¾“å…¥å¯†ç " />
        </div>

        <!-- æœ€å–œæ¬¢çš„å¥³å¯¼æ¼” -->
        <div class="form-group">
          <label for="favoriteDirector">æœ€å–œæ¬¢çš„å¥³å¯¼æ¼” *</label>
          <input id="favoriteDirector" type="text" required placeholder="å¦‚ï¼šé˜¿æ¶…æ–¯Â·ç“¦å°”è¾¾" />
        </div>

        <!-- æœ€å–œæ¬¢çš„å¥³æ€§ç”µå½± -->
        <div class="form-group">
          <label for="favoriteFilm">æœ€å–œæ¬¢çš„å¥³æ€§ç”µå½± *</label>
          <input id="favoriteFilm" type="text" required placeholder="å¦‚ï¼šç‡ƒçƒ§å¥³å­çš„è‚–åƒ" />
        </div>

        <!-- æœ€è¿‘çœ‹çš„ç”µå½±ï¼ˆå¯é€‰ï¼‰ -->
        <div class="form-group">
          <label for="recentFilm">æœ€è¿‘çœ‹çš„ä¸€éƒ¨ç”µå½±ï¼ˆå¯é€‰ï¼‰</label>
          <input id="recentFilm" type="text" placeholder="å¦‚ï¼šé˜¿æ¶…æ–¯è®ºç“¦å°”è¾¾" />
        </div>

        <!-- åˆ†äº«æƒ³æ³•ï¼ˆå¯é€‰ï¼‰ -->
        <div class="form-group">
          <label for="thoughts">åˆ†äº«ä½ æœ€è¿‘å¥½ç©çš„æƒ³æ³•ï¼ˆå¯é€‰ï¼‰</label>
          <textarea id="thoughts" rows="3" placeholder="å†™ä¸‹ä½ çš„æƒ³æ³•..."></textarea>
        </div>

        <button type="submit" class="submit-button">æ³¨å†Œ</button>
        <button type="button" class="back-button" onclick="showLoginChoice()">è¿”å›</button>
      </form>
    </div>
  </div>

  <!-- ç”¨æˆ·é¡µé¢æ¨¡æ€æ¡† -->
  <div class="user-modal-overlay" id="userModalOverlay" onclick="closeUserModal()"></div>
  <div class="user-modal" id="userModal">
    <span class="modal-close" onclick="closeUserModal()">&times;</span>
    <div id="userContent" class="user-content"></div>
  </div>
  <!-- å·¦å³åˆ‡æ¢æŒ‰é’®ï¼ˆç‹¬ç«‹äºæ¨¡æ€æ¡†ï¼Œé¿å…è¢«overflowè£å‰ªï¼‰ -->
  <div class="user-chevron prev" onclick="userChevronPrev()" aria-label="ä¸Šä¸€ä½">&lt;</div>
  <div class="user-chevron next" onclick="userChevronNext()" aria-label="ä¸‹ä¸€ä½">&gt;</div>

  <!-- ç”¨æˆ·åˆ—è¡¨ä¾§è¾¹æ  -->
  <div class="users-sidebar-overlay" id="usersSidebarOverlay" onclick="closeUsersSidebar()"></div>
  <div class="users-sidebar" id="usersSidebar">
    <div id="usersSidebarGrid" class="sidebar-users-grid"></div>
  </div>
  <!-- å³ä¾§æ ‡ç­¾æŒ‰é’®ï¼šç‚¹å‡»åˆ‡æ¢ä¾§è¾¹æ  -->
  <div class="users-sidebar-tab" id="usersSidebarTab" onclick="toggleUsersSidebarTab()" title="ç”¨æˆ·åˆ—è¡¨">&lt;</div>

  <!-- æˆ‘çš„ç•™è¨€é¡µé¢ -->
  <div class="my-messages-overlay" id="myMessagesOverlay" onclick="closeMyMessages()"></div>
  <div class="my-messages-page" id="myMessagesPage">
    <div class="messages-header">
      <h2>æˆ‘æ”¶åˆ°çš„ç•™è¨€</h2>
      <span class="modal-close" onclick="closeMyMessages()">&times;</span>
    </div>
    <div id="myMessagesList" class="messages-list"></div>
  </div>

  <!-- å…³ç³»ä¸­å¿ƒé¡µé¢ï¼ˆæŸ¥çœ‹å·²å»ºç«‹ä¸å¾…å¤„ç†ã€ä»¥åŠå¤„ç†æ“ä½œï¼‰ -->
  <div class="my-messages-overlay" id="relationshipCenterOverlay" onclick="closeRelationshipCenter()"></div>
  <div class="my-messages-page" id="relationshipCenterPage">
    <div class="messages-header">
      <h2>å…³ç³»ä¸­å¿ƒ</h2>
      <span class="modal-close" onclick="closeRelationshipCenter()">&times;</span>
    </div>
    <div id="relationshipCenterContent" class="messages-list"></div>
  </div>

  <!-- åŠ è½½æç¤º -->
  <div class="loading-overlay" id="loadingOverlay">
    <div class="loading-content">
      <div class="loading-spinner"></div>
      <div class="loading-text">åŠ è½½ä¸­...</div>
    </div>
  </div>

  <!-- å¾½ç« æç¤ºæ°”æ³¡ -->
  <div class="badge-toast hidden" id="badgeToast">
    <span class="badge-icon-toast" id="badgeToastIcon"></span>
    <span id="badgeToastText"></span>
  </div>

  <!-- ç®¡ç†å‘˜å¯†ç è¾“å…¥å¼¹çª— -->
  <div class="admin-prompt-overlay" id="adminPromptOverlay" onclick="closeAdminPrompt()"></div>
  <div class="admin-prompt" id="adminPrompt">
    <h3>è¾“å…¥ç®¡ç†å‘˜å¯†ç </h3>
    <input type="password" id="adminPasswordInput" placeholder="å¯†ç " />
    <div class="admin-prompt-buttons">
      <button onclick="confirmAdminPassword()">ç¡®å®š</button>
      <button onclick="closeAdminPrompt()">å–æ¶ˆ</button>
    </div>
  </div>

  <!-- å…³ç³»ç”³è¯·å¼¹çª—ï¼ˆé€‰æ‹©å…³ç³»ç±»å‹ + è¾“å…¥ç•™è¨€ï¼‰ -->
  <div class="relationship-prompt-overlay" id="relationshipPromptOverlay" onclick="closeRelationshipPrompt()"></div>
  <div class="relationship-prompt" id="relationshipPrompt">
    <h3>å»ºç«‹å…³ç³»</h3>
    <p style="font-size: 14px; color: #888; margin-bottom: 20px;">è¯·é€‰æ‹©ä¸€ä¸ªå…³ç³»ç±»å‹ï¼š</p>
    
    <!-- å…³ç³»ç±»å‹é€‰æ‹©æŒ‰é’®ï¼ˆå·²æ›¿æ¢ä¸ºå…­ç§æ–°å…³ç³»ï¼‰ -->
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 20px;">
      <button class="relationship-type-btn" onclick="selectRelationshipType('eternal')" data-type="eternal">
        <div style="font-size: 28px; margin-bottom: 6px;">ğŸª¢</div>
        <div style="font-size: 14px; font-weight: 600;">Eternal Bond</div>
      </button>
      <button class="relationship-type-btn" onclick="selectRelationshipType('backforth')" data-type="backforth">
        <div style="font-size: 28px; margin-bottom: 6px;">ğŸ¸</div>
        <div style="font-size: 14px; font-weight: 600;">Back and Forth</div>
      </button>
      <button class="relationship-type-btn" onclick="selectRelationshipType('investor')" data-type="investor">
        <div style="font-size: 28px; margin-bottom: 6px;">ğŸ’¸</div>
        <div style="font-size: 14px; font-weight: 600;">Angel Investor</div>
      </button>
      <button class="relationship-type-btn" onclick="selectRelationshipType('teddy')" data-type="teddy">
        <div style="font-size: 28px; margin-bottom: 6px;">ğŸ§¸</div>
        <div style="font-size: 14px; font-weight: 600;">Needy Teddy</div>
      </button>
      <button class="relationship-type-btn" onclick="selectRelationshipType('time')" data-type="time">
        <div style="font-size: 28px; margin-bottom: 6px;">â³</div>
        <div style="font-size: 14px; font-weight: 600;">Time Needed</div>
      </button>
      <button class="relationship-type-btn" onclick="selectRelationshipType('blah')" data-type="blah">
        <div style="font-size: 28px; margin-bottom: 6px;">ğŸ’¬</div>
        <div style="font-size: 14px; font-weight: 600;">Blah Blah</div>
      </button>
    </div>

    <!-- ç•™è¨€è¾“å…¥æ¡† -->
    <p style="font-size: 14px; color: #888; margin-bottom: 8px;">ç”³è¯·ç•™è¨€ï¼ˆå¿…å¡«ï¼‰ï¼š</p>
    <textarea id="relationshipMessage" placeholder="è¯´è¯´ä½ ä¸ºä»€ä¹ˆæƒ³ä¸å¯¹æ–¹å»ºç«‹è¿™ç§å…³ç³»..." 
              style="width: 100%; height: 80px; padding: 10px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: #f5f5f5; font-family: 'Lato', sans-serif; resize: vertical; margin-bottom: 16px;"></textarea>

    <!-- æ“ä½œæŒ‰é’® -->
    <div style="display: flex; gap: 10px; justify-content: flex-end;">
      <button onclick="closeRelationshipPrompt()" style="padding: 10px 20px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); color: #ccc; border-radius: 8px; cursor: pointer; font-size: 14px;">å–æ¶ˆ</button>
      <button onclick="submitRelationshipRequest(window._selectedRelationType)" style="padding: 10px 20px; background: rgba(212,175,55,0.2); border: 1px solid rgba(212,175,55,0.4); color: #d4af37; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600;">å‘é€ç”³è¯·</button>
    </div>
  </div>

  <!-- è§£é™¤å…³ç³»å¼¹çª—ï¼ˆè¾“å…¥åŸå› ï¼‰ -->
  <div class="relationship-prompt-overlay" id="dissolvePromptOverlay" onclick="closeDissolvePrompt()"></div>
  <div class="relationship-prompt" id="dissolvePrompt">
    <h3>è§£é™¤å…³ç³»</h3>
    <p style="font-size: 14px; color: #888; margin-bottom: 20px;">è¯·è¯´æ˜è§£é™¤å…³ç³»çš„åŸå› ï¼š</p>
    <textarea id="dissolveReasonInput" placeholder="è¾“å…¥è§£é™¤åŸå› ï¼ˆå¯é€‰ï¼‰..." 
      style="width: 100%; min-height: 100px; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: #f5f5f5; font-size: 14px; resize: vertical; font-family: 'Lato', sans-serif; margin-bottom: 20px;"></textarea>
    <div style="display: flex; gap: 10px; justify-content: flex-end;">
      <button onclick="closeDissolvePrompt()" style="padding: 10px 20px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); color: #ccc; border-radius: 8px; cursor: pointer; font-size: 14px;">å–æ¶ˆ</button>
      <button onclick="submitDissolveRequest()" style="padding: 10px 20px; background: rgba(255,68,68,0.2); border: 1px solid rgba(255,68,68,0.4); color: #ff4444; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600;">ç¡®è®¤è§£é™¤</button>
    </div>
  </div>

  <!-- åˆ é™¤è´¦æˆ·ç¡®è®¤å¼¹çª— -->
  <div class="admin-prompt-overlay" id="deleteAccountOverlay" onclick="closeDeleteAccountPrompt()"></div>
  <div class="admin-prompt" id="deleteAccountPrompt">
    <h3 style="color: #ff4444; font-size: 18px;">âš ï¸ æ³¨é”€è´¦æˆ·</h3>
    <p id="deleteAccountMessage" style="color: #ccc; margin: 20px 0; line-height: 1.6;"></p>
    <div style="display: flex; gap: 12px;">
      <button onclick="closeDeleteAccountPrompt()" style="flex: 1; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); color: #ccc; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600;">å–æ¶ˆ</button>
      <button onclick="confirmDeleteAccount()" style="flex: 1; padding: 12px; background: rgba(255,68,68,0.25); border: 1px solid rgba(255,68,68,0.5); color: #ff4444; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 600;">ç¡®è®¤æ³¨é”€</button>
    </div>
  </div>

  <!-- App Scripts: æ³¨æ„é¡ºåºï¼Œéæ¨¡å—ï¼Œå…¨å±€æš´éœ² -->
  <script src="./js/config.js"></script>
  <script src="./js/data.js"></script>
  <script src="./js/firebase.js"></script>
  <script src="./js/ui.js"></script>
  <script src="./js/quiz.js"></script>
  <script src="./js/user.js"></script>
  <script src="./js/admin.js"></script>
  <script src="./js/gestures.js"></script>
  <script src="./js/messages.js"></script>
  <script>
    // åˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', function(){
      if (window.initAvatarSelector) window.initAvatarSelector();
      if (window.initGestures) window.initGestures();
      if (window.initUserCorner) window.initUserCorner();
      if (window.initUsersSidebarTab) window.initUsersSidebarTab();
    });
  </script>
</body>
</html>
